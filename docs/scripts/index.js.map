{"version":3,"sources":["../../web/src/scripts/index.js"],"names":["config","document","getElementById","table","names","map","entry","symbols","toLowerCase","words_input","disabled","tile_size_input","value","preloadCount","images","name","i","img","Image","src","onload","length","logger","init","tile_size_value","innerHTML","oninput","doStuff","strings","split","word","output","string","decomps","decompose","start","Date","now","n","decomp","decompNames","element","index","indexOf","push","data","getImageData","parseInt","link","createElement","download","href","appendChild","spritePool","tileSize","canvas","ctx","getContext","width","height","pos","elementIndex","drawImage","toDataURL","solutions","decomposeR","found","substr","_decomps","_decomp","unshift","txt","enabled","console","log"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Config and files\n */\n\nconst config = {\n\t// \"output_dir\": \"outputs\",\n\t// \"tile_size\": 150,\n\t// \"words\": [\"ra\", \"ra\", \"rasputin\"],\n\t// \"words_file\": \"Words_10k.txt\",\n\t// \"dict_file\": \"PeriodicTable.txt\",\n\t// \"use_words_file\": false,\n\t\"logger\": true,\n\t\"words_input\": document.getElementById(\"words_input\"),\n\t\"tile_size_input\": document.getElementById(\"tile_size_input\"),\n\t\"tile_size_value\": document.getElementById(\"tile_size_value\"),\n\t\"output\": document.getElementById(\"output\")\n};\n\nconst table = [[\"Lead\",\"pb\"],[\"Thallium\",\"tl\"],[\"Lutetium\",\"lu\"],[\"Thulium\",\"tm\"],[\"Americium\",\"am\"],[\"Livermorium\",\"lv\"],[\"Samarium\",\"sm\"],[\"Flerovium\",\"fl\"],[\"Palladium\",\"pd\"],[\"Chlorine\",\"cl\"],[\"Phosphorus\",\"p\"],[\"Bismuth\",\"bi\"],[\"Radon\",\"rn\"],[\"Tantalum\",\"ta\"],[\"Magnesium\",\"mg\"],[\"Fermium\",\"fm\"],[\"Krypton\",\"kr\"],[\"Copper\",\"cu\"],[\"Aluminium\",\"al\"],[\"Rhenium\",\"re\"],[\"Neon\",\"ne\"],[\"Lawrencium\",\"lr\"],[\"Gadolinium\",\"gd\"],[\"Nitrogen\",\"n\"],[\"Platinum\",\"pt\"],[\"Sodium\",\"na\"],[\"Sulfur\",\"s\"],[\"Rhodium\",\"rh\"],[\"Yttrium\",\"y\"],[\"Nickel\",\"ni\"],[\"Oxygen\",\"o\"],[\"Barium\",\"ba\"],[\"Thorium\",\"th\"],[\"Bromine\",\"br\"],[\"Ununseptium\",\"uus\"],[\"Protactinium\",\"pa\"],[\"Einsteinium\",\"es\"],[\"Rutherfordium\",\"rf\"],[\"Francium\",\"fr\"],[\"Erbium\",\"er\"],[\"Silicon\",\"si\"],[\"Manganese\",\"mn\"],[\"Indium\",\"in\"],[\"Rubidium\",\"rb\"],[\"Radium\",\"ra\"],[\"Curium\",\"cm\"],[\"Ununoctium\",\"uuo\"],[\"Germanium\",\"ge\"],[\"Titanium\",\"ti\"],[\"Arsenic\",\"as\"],[\"Helium\",\"he\"],[\"Neodymium\",\"nd\"],[\"Mendelevium\",\"md\"],[\"Antimony\",\"sb\"],[\"Europium\",\"eu\"],[\"Iron\",\"fe\"],[\"Seaborgium\",\"sg\"],[\"Nobelium\",\"no\"],[\"Cerium\",\"ce\"],[\"Osmium\",\"os\"],[\"Copernicium\",\"cn\"],[\"Beryllium\",\"be\"],[\"Polonium\",\"po\"],[\"Ruthenium\",\"ru\"],[\"Potassium\",\"k\"],[\"Dubnium\",\"db\"],[\"Argon\",\"ar\"],[\"Darmstadtium\",\"ds\"],[\"Scandium\",\"sc\"],[\"Carbon\",\"c\"],[\"Neptunium\",\"np\"],[\"Lanthanum\",\"la\"],[\"Uranium\",\"u\"],[\"Zirconium\",\"zr\"],[\"Niobium\",\"nb\"],[\"Calcium\",\"ca\"],[\"Iridium\",\"ir\"],[\"Cesium\",\"cs\"],[\"Plutonium\",\"pu\"],[\"Gold\",\"au\"],[\"Ununtrium\",\"uut\"],[\"Cobalt\",\"co\"],[\"Praseodymium\",\"pr\"],[\"Zinc\",\"zn\"],[\"Berkelium\",\"bk\"],[\"Roentgenium\",\"rg\"],[\"Chromium\",\"cr\"],[\"Fluorine\",\"f\"],[\"Hafnium\",\"hf\"],[\"Selenium\",\"se\"],[\"Technetium\",\"tc\"],[\"Meitnerium\",\"mt\"],[\"Tin\",\"sn\"],[\"Terbium\",\"tb\"],[\"Actinium\",\"ac\"],[\"Holmium\",\"ho\"],[\"Californium\",\"cf\"],[\"Lithium\",\"li\"],[\"Ununpentium\",\"uup\"],[\"Vanadium\",\"v\"],[\"Bohrium\",\"bh\"],[\"Hassium\",\"hs\"],[\"Strontium\",\"sr\"],[\"Cadmium\",\"cd\"],[\"Boron\",\"b\"],[\"Tungsten\",\"w\"],[\"Silver\",\"ag\"],[\"Promethium\",\"pm\"],[\"Ytterbium\",\"yb\"],[\"Molybdenum\",\"mo\"],[\"Gallium\",\"ga\"],[\"Tellurium\",\"te\"],[\"Xenon\",\"xe\"],[\"Mercury\",\"hg\"],[\"Dysprosium\",\"dy\"],[\"Iodine\",\"i\"],[\"Hydrogen\",\"h\"],[\"Astatine\",\"at\"]];\n\nconst names = table.map(entry => entry[0]);\nconst symbols = table.map(entry => entry[1].toLowerCase());\n\n/**\n * Image preload\n */\n\nconfig.words_input.disabled = true;\nconfig.tile_size_input.value = 150;\n\nlet preloadCount = 0;\nlet images = names.map((name, i) => {\n\tconst img = new Image();\n\timg.src = `/assets/tiles/${name}.png`;\n\timg.onload = function() {\n\t\t++preloadCount;\n\t\tif (preloadCount === names.length) {\n\t\t\tlogger(`Preloaded ${names.length} images`);\n\t\t\tinit();\n\t\t}\n\t}\n\n\treturn img;\n});\n\n/**\n * Init\n */\n\nfunction init() {\n\tconfig.words_input.disabled = false;\n\tconfig.tile_size_value.innerHTML = config.tile_size_input.value;\n\n\tconfig.tile_size_input.oninput = function() {\n\t\tconfig.tile_size_value.innerHTML = config.tile_size_input.value;\n\t\tdoStuff();\n\t};\n\tconfig.words_input.oninput = doStuff;\n\n\tdoStuff();\n}\n\n/**\n * Main\n * Take the strings, decompose them, generate images and display\n */\n\nfunction doStuff() {\n\tconst strings = config.words_input.value.split(\" \").map(word => word.toLowerCase());\n\tconfig.output.innerHTML = \"\";\n\n\tfor (let string of strings) {\n\t\tconst decomps = decompose(string, symbols);\n\n\t\tlet start = Date.now();\n\t\tlet n = 0;\n\n\t\tfor (; n < decomps.length; ++n) {\n\t\t\tconst decomp = decomps[n];\n\t\t\tconst decompNames = [];\n\n\t\t\tfor (let element of decomp) {\n\t\t\t\tconst index = symbols.indexOf(element);\n\t\t\t\tdecompNames.push(names[index]);\n\t\t\t}\n\n\t\t\tconst data = getImageData(\n\t\t\t\tdecompNames,\n\t\t\t\timages,\n\t\t\t\tparseInt(config.tile_size_input.value)\n\t\t\t);\n\n\t\t\tconst link = document.createElement(\"a\");\n\t\t\tlink.download = `${string}_${n+1}`;\n\t\t\tlink.href = data;\n\n\t\t\tconst img = document.createElement(\"img\");\n\t\t\timg.src = data;\n\n\t\t\tlink.appendChild(img);\n\t\t\tconfig.output.appendChild(link);\n\t\t}\n\n\t\tlogger(`Generating ${n} images for ${string} in ${Date.now() - start} ms`, config.logger);\n\t}\n}\n\n/**\n * Image generator\n */\n\nfunction getImageData(decompNames, spritePool, tileSize) {\n\tconst canvas = document.createElement(\"canvas\");\n\tconst ctx = canvas.getContext(\"2d\");\n\tcanvas.width = decompNames.length * tileSize;\n\tcanvas.height = tileSize;\n\n\tlet pos = 0;\n\n\tfor (let element of decompNames) {\n\t\tlet elementIndex = names.indexOf(element);\n\t\tctx.drawImage(spritePool[elementIndex], pos, 0, tileSize, tileSize)\n\n\t\tpos += tileSize;\n\t}\n\n\treturn canvas.toDataURL(\"image/png\");\n}\n\n/**\n * Decomposer\n */\n\n// Wrapper for the recursive algorithm\nfunction decompose(string, symbols) {\n\tlet solutions = [];\n\tdecomposeR(string, symbols, solutions);\n\treturn solutions;\n}\n\n\n// Return a decomposition of string in array form\n// If impossible, returns [false]\nfunction decomposeR(string, symbols, solutions) {\n\t// Recursive stop\n\tif (string === \"\") return [[]];\n\n\t// Search for an element\n\t// by matching every substring\n\tlet found = false;\n\tlet decomps = [];\n\n\tfor (let i = 1; i <= string.length; ++i) {\n\t\tconst substr = string.substr(0, i);\n\t\tconst elementIndex = symbols.indexOf(substr);\n\n\t\t// Found a potential element\n\t\tif (elementIndex !== -1) {\n\t\t\tfound = true;\n\t\t\tconst _decomps = decomposeR(string.substr(i), symbols, solutions);\n\n\t\t\tfor (let _decomp of _decomps) {\n\t\t\t\tif (_decomp === false) {\n\t\t\t\t\t// Decomposition is impossible\n\t\t\t\t\t// Propagate the error upwards\n\t\t\t\t\tdecomps.push([false]);\n\t\t\t\t} else {\n\t\t\t\t\t// Add element to decomposition\n\t\t\t\t\t_decomp.unshift(symbols[elementIndex]);\n\t\t\t\t\t// Add decomposition to solutions if one\n\t\t\t\t\tif (string === substr) {\n\t\t\t\t\t\tsolutions.push(_decomp);\n\t\t\t\t\t}\n\t\t\t\t\t// Add to decomposition\n\t\t\t\t\tdecomps.push(_decomp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// No element has been found\n\t// Decomposition is impossible\n\tif (found === false) return [false];\n\n\t// Return all deocmpositions found\n\treturn decomps;\n}\n\n/**\n * Logger\n */\n\nfunction logger(txt, enabled = true) {\n\tif (enabled) {\n\t\tconsole.log(txt);\n\t}\n}"]}